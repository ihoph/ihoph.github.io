---
layout: post
title:  DDD - 아키텍처
date:   2021-01-24 13:10:00 +0800
categories: DDD
tag: architecture
sitemap :
  changefreq : daily
  priority : 1.0
---

이 포스트는 IDDD 4장을 보고 작성합니다.

DDD의 장점 중 하나는 특정 아키텍처의 사용을 요구하지 않는다는 점이다. 

아키텍처 스타일과 패턴을 선택할 때는 유스케이스와 사용자 스토리, 도메인 모델의 시나리오 등과 같은 기능적 요구사항을 사용할 수 있는지를 고려해야한다. 즉 기능적 요구사항 없이는 필요한 소프트웨어 품질을 결정할 수 없다.

## 4 계층

사용자 인터페이스에서 찾을 수 있는 유효성 검사의 유형은 도메인 모델에 속해 있는 유형과는 다르다. 깊은 비즈니스 지식을 표현하는 대단위 유효성 검사는 모델로만 제한하는 편이 좋다.

사용자 인터페이스 컴포넌트가 도메인 모델의 객체를 사용하더라도 일반적으론 데이터를 투명한 유리에 올려두는 수준으로 제한된다. 

애플리케이션 계층에서는 도메인 로직이 전혀 없고, 영속성 트랜잭션과 보안을 제어할 수 있다. 또한 이벤트 기반의 알림을 다른 시스템으로 보내거나, 사용자에게 보낼 이메일 메시지의 작성을 담당할 수도 있다. 보통 애그리거트를 리포지토리에서 가져와서 몇몇 커맨드 오퍼레이션을 수행한다. 애플리케이션 서비스는 새로운 애그리게잇 인스턴스를 생성하고 리포지토리로 저장시킨다. 무상태 오퍼레이션으로 설계된 일부 도메인별 태스크를 완성하기 위해 도메인 서비스를 사용할 수도 있다.

애플리케이션 계층은 이벤트에 구독자를 등록할 수 있다. 이렇게 함으로써 이벤트를 저장하거나 전달하거나 애플리케이션이 책임지고 처리토록 할 수 있다. 이를 통해 도메인 모델이 고유한 핵심 문제만 알면 되는 자유로움을 갖고, 도메인 이벤트 게시자를 경량으로 유지할 수 있도록 해주며, 메시징 인프라스트럭처 의존성으로부터 해방된다.

