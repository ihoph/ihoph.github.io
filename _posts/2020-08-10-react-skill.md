---
layout: post
title:  리액트를 다루는 기술 정리
date:   2020-08-10 19:00:00 +0800
categories: 책/강의
tag: 리액트
sitemap :
  changefreq : daily
  priority : 1.0
---

이 포스트에서는 velopert님의 [리액트를 다루는 기술](https://book.naver.com/bookdb/book_detail.nhn?bid=15372757)을 정리합니다. 정리하는대로 조금씩 업데이트할 예정입니다.

## 1. 리액트 시작

### 1.1 왜 리액트인가?

웹 페이지에서 업데이트하는 항목에 따라 어떤 부분을 찾아서 변경할지 규칙을 정하는 작업은 간단하지만, 애플리케이션 규모가 크면 상당히 복잡해지고 제대로 관리하지 않으면 성능도 떨어질 수 있다. 이를 개선하기 위해 어떤 데이터가 변할 때마다 어떤 변화를 줄지 고민하는 것이 아니라 기존 뷰를 날려버리고 처음부터 새로 렌덩하는 방식을 생각할 수 있다. 리액트가 이러한 것을 해준다.

### 1.2 리액트 이해

리액트는 오직 뷰만 신경쓰는 라이브러리다. 리액트는 초기 렌더링, 조화 과정을 거친다. 

초기 렌더링

초기 렌더링에서 render 함수는 컴포넌트(특정 부분이 어떻게 생길지 정하는 선언체)가 어떻게 생겼는지 정의하는 역할을 한다. render 함수는 html 형식의 문자열을 반환하지 않고, 뷰가 어떻게 생겼고 어떻게 작동하는지에 대한 정보를 지닌 객체를 반환한다. 컴포넌트 내부에는 또 다른 컴포넌트들이 들어갈 수 있다. 이 때 render 함수를 실행하면 그 내부에 있는 컴포넌트들도 재귀적으로 렌더링한다. 최상위 컴포넌트의 렌더링 작업이 끝나면 니니고 있는 작업들을 사용하여 html 마크업을 만들고, 이룰 우리가 정하는 실제 페이지의 dom 요소 안에 주입한다.

조화 과정

컴포넌트에서 데이터에 변화가 있을 때 우리가 보기에는 변화에 따라 뷰가 변형되는 것처럼 보이지만 사실 새로운 요소로 갈아끼운다. 컴포넌트는 데이터를 업데이트했을 때 단순히 업데이트한 값을 수정하는 것이 아니라, 새로운 데이터를 가지고 render 함수를 또 다시 호출한다. 그러면 render 함수는 그 데이터를 지닌 뷰를 생성한다. 이 때 render 함수가 반환하는 결과를 곧바로 dom에 반영하지 않고, 이전 render 함수가 만들었던 컴포넌트 정보와 현재 render 함수가 만든 컴포넌트 정보를 비교한다. 비교 후  둘의 차이를 알아내 최소한의 연산으로 dom 트리를 업데이트한다. 즉, 루트 노드부터 시작하여 전체 컴포넌트를 처음부터 다시 렌더링하는 것처럼 보이지만, 사실 최적의 자원을 사용하여 이를 수행하는 것이다.

### 1.3 리액트의 특징

dom은 객체로 문서 구조를 표현하는 방법이다. dom은 약점이 있는데, 동적 ui에 최적화되어 있지 않다는 것이다. 규모가 큰 웹 애플리케이션에서 dom에 직접 접근하여 변화를 주다 보면 성능이슈가 조금씩 발생한다. dom 자체가 느린 것은 아니다. 단, 웹 브라우저 단에서 dom에 변화가 일어나면 웹 브라우저가 css를 다시 연산하고, 레이아웃으 ㄹ 구성하고, 페이지를 리페인트하게 되는데 이 과정에서 시간을 허비한다. 이를 해결하기 위해서는 dom을 최소한으로 조작하여 작업을 처리해야 한다. 리액트는 virtual dom 방식을 사용하여 dom 업데이트를 추상화함으로써 dom 처리 횟수를 최소화하고 효율적으로 진행한다.

virtual dom을 사용하면 실제 dom에 접근하여 조작하는 대신, 이를 추상화한 자바스크립트 객체를 구성하여 사용한다. 리액트에서 데이터가 변하여 웹 브라우저에 실제 dom을 업데이트할 때는 다음 세 절차를 거친다.

1. 데이터를 업데이트하면 전체 ui를 virtual dom에 리렌더링한다.
2. 이전 virtual dom에 있던 내용과 현재 내용을 비교한다.
3. 바뀐 부분만 실제 dom에 적용한다.

